box: kroniak/ssh-client
build:
  steps:
    - script:
        name: Init
        code: |
          echo "Start Deployment !"
    - add-to-known_hosts:
      hostname: htko.ca
    - mktemp:
      envvar: ssh_key_path
    - create-file:
      name: write key
      filename: ssh_key_path
      content: ssh_key
      overwrite: true
      hide-from-log: true
    - script:
        name: Show key path
        code: |
          echo #ssh_key_path
    - script:
      name: connect to server
      code: ssh -v -i $ssh_key_path -l $ssh_user -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no htko.ca ''touch /srv/test.txt''
